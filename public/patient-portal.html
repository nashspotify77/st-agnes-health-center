<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patient Portal - St. Agnes Health Centre</title>
    <!-- Local Bootstrap CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">
    <!-- Global styles -->
    <link href="styles.css" rel="stylesheet">
    <style>
        /* minor page-specific styles (kept minimal; global styles handle most) */
         .container {
             max-width: 600px;
             margin-top: 50px;
         }
         .form-signin {
             background-color: #ffffff;
             padding: 30px;
             border-radius: 10px;
             box-shadow: 0 0 10px rgba(0,0,0,0.1);
         }
    </style>
</head>
<body>
    <div class="container">
        <!-- Back button -->
        <div class="mb-3">
            <button class="btn btn-light" type="button" onclick="history.back()" aria-label="" data-i18n-attr="aria-label:btn.back"><span aria-hidden="true">←</span> <span data-i18n="btn.back">← Back</span></button>
        </div>
        <div id="signup-container" class="form-signin">
            <h3 class="mb-3" data-i18n="portal.signup.title">Sign Up</h3>
            <form id="signup-form">
                <div class="mb-3">
                    <label for="signup-username" class="form-label" data-i18n="portal.username">Username</label>
                    <input type="text" class="form-control" id="signup-username" required placeholder="" data-i18n-placeholder="portal.username">
                </div>
                <div class="mb-3">
                    <label for="signup-password" class="form-label" data-i18n="portal.password">Password</label>
                    <input type="password" class="form-control" id="signup-password" required placeholder="" data-i18n-placeholder="portal.password">
                    <div id="signup-password-strength" class="small text-muted mt-1">
                        Use at least 8 characters including letters, numbers and a symbol.
                    </div>
                </div>
                <div class="mb-3">
                    <label for="signup-email" class="form-label" data-i18n="portal.email">Email</label>
                    <input type="email" class="form-control" id="signup-email" required placeholder="" data-i18n-placeholder="portal.email">
                </div>
                <button type="submit" class="btn btn-green w-100" data-i18n-value="portal.signup.button">Sign Up</button>
            </form>
            <p class="mt-3 text-center"><span data-i18n="portal.already">Already have an account?</span> <a href="#" id="show-login" data-i18n="portal.login.button">Login</a></p>
        </div>
        <div id="login-container" class="form-signin" style="display: none;">
            <h3 class="mb-3" data-i18n="portal.login.title">Login</h3>
            <form id="login-form">
                <div class="mb-3">
                    <label for="login-username" class="form-label" data-i18n="portal.username">Username</label>
                    <input type="text" class="form-control" id="login-username" required placeholder="" data-i18n-placeholder="portal.username">
                </div>
                <div class="mb-3">
                    <label for="login-password" class="form-label" data-i18n="portal.password">Password</label>
                    <input type="password" class="form-control" id="login-password" required placeholder="" data-i18n-placeholder="portal.password">
                </div>
                <button type="submit" class="btn btn-green w-100" data-i18n-value="portal.login.button">Login</button>
            </form>
            <p class="mt-3 text-center"><span data-i18n="portal.noaccount">Don't have an account?</span> <a href="#" id="show-signup" data-i18n="portal.signup.button">Sign Up</a></p>
        </div>
    </div>
    <!-- Local Bootstrap JS -->
    <script src="js/bootstrap.bundle.min.js"></script>
    <script src="lang.js"></script>
    <!-- Global site script (search/profile helpers, logo fallback) -->
    <script src="script.js"></script>
    <script>
        // Ensure the main site navigation and sidebar are not visible on the patient portal
        document.addEventListener('DOMContentLoaded', function() {
            const toHide = ['#sidebarMenu', '#sidebarMenuOverlay', '.menu-wrapper', '.navbar', '#mainMenuBtn'];
            toHide.forEach(selector => {
                document.querySelectorAll(selector).forEach(el => {
                    // remove rather than hide to avoid layout shifts
                    if (el && el.parentNode) el.parentNode.removeChild(el);
                });
            });
        });
    </script>
    <script>
         // Simulated database using local storage
         let users = JSON.parse(localStorage.getItem('users')) || [];
         // Password strength helper (same rules as profile)
         function isStrongPassword(pw) {
           if (!pw || pw.length < 8) return false;
           const hasLetter = /[A-Za-z]/.test(pw);
           const hasNumber = /[0-9]/.test(pw);
           const hasSymbol = /[^A-Za-z0-9]/.test(pw);
           return hasLetter && hasNumber && hasSymbol;
         }

         // add a live strength indicator element after password input
         (function addSignupPwIndicator(){
           const pw = document.getElementById('signup-password');
           if (!pw) return;
           const f = document.getElementById('signup-password-strength');
           pw.addEventListener('input', function(){
             const v = pw.value;
             if (isStrongPassword(v)) {
               f.textContent = 'Strong password ✔';
               f.classList.remove('text-danger');
               f.classList.add('text-success');
             } else {
               f.textContent = 'Password must be at least 8 characters and include letters, numbers and a symbol.';
               f.classList.remove('text-success');
               f.classList.add('text-danger');
             }
           });
         })();

          // Toggle between sign-up and login
          document.getElementById('show-login').addEventListener('click', function(e) {
              e.preventDefault();
              document.getElementById('signup-container').style.display = 'none';
              document.getElementById('login-container').style.display = 'block';
          });
  
          document.getElementById('show-signup').addEventListener('click', function(e) {
              e.preventDefault();
              document.getElementById('login-container').style.display = 'none';
              document.getElementById('signup-container').style.display = 'block';
          });
  
          // Sign Up
          document.getElementById('signup-form').addEventListener('submit', function(e) {
              e.preventDefault();
              const username = document.getElementById('signup-username').value;
              const password = document.getElementById('signup-password').value;
              const email = document.getElementById('signup-email').value;
             if (users.find(user => user.username === username)) {
                 alert('Username already exists');
                 return;
             }
             if (!isStrongPassword(password)) {
                 alert('Password is not strong enough. Use at least 8 characters with letters, numbers and a symbol.');
                 return;
             }
             users.push({ username, password, email });
             localStorage.setItem('users', JSON.stringify(users));
             localStorage.setItem('currentUser', username);
             window.location.href = 'dashboard.html';
          });
  
          // Login
          document.getElementById('login-form').addEventListener('submit', function(e) {
              e.preventDefault();
              const username = (document.getElementById('login-username').value || '').trim();
              const password = document.getElementById('login-password').value || '';
              const storedUsers = JSON.parse(localStorage.getItem('users')) || [];
              const user = storedUsers.find(u => u.username === username && u.password === password);
              if (user) {
                  localStorage.setItem('currentUser', username);
                  window.location.href = 'dashboard.html';
              } else {
                  alert('Invalid username or password');
              }
          });
     </script>
     <!-- Footer (same as index) -->
<footer class="site-footer" role="contentinfo">
  <div class="container">
    <div class="footer-column">
      <div class="footer-logo">
        <img src="images/logo.png" alt="logo">
        <div>
          <h4 data-i18n="footer.about_title">About</h4>
          <p class="footer-about" data-i18n="footer.about_text">St. Agnes Health Centre — quality care in Douala...</p>
        </div>
      </div>
    </div>
    <div class="footer-column footer-links">
      <h4 data-i18n="footer.quick_links">Quick Links</h4>
      <a href="index.html" data-i18n="nav.home">Home</a>
      <a href="services.html" data-i18n="nav.services">Services</a>
      <a href="#contact" data-i18n="nav.contact">Contact</a>
    </div>
    <div class="footer-column footer-contact">
      <h4 data-i18n="footer.contact_title">Contact</h4>
      <p><strong data-i18n="footer.phone_label">Phone</strong>: <a href="tel:+237671457143" style="color:inherit;text-decoration:none;">+237 671 457 143</a></p>
      <p><strong data-i18n="footer.email_label">Email</strong>: <a href="mailto:stagneshc@yahoo.com" style="color:inherit;text-decoration:none;">stagneshc@yahoo.com</a></p>
      <p data-i18n="footer.address_label">Address</p>
      <p>237 Cite de la Paix Douala-Bassa</p>
      <div class="footer-social" aria-label="Social links">
        <a href="#" aria-label="Facebook" title="Facebook">f</a>
        <a href="#" aria-label="Twitter" title="Twitter">t</a>
        <a href="#" aria-label="Instagram" title="Instagram">ig</a>
      </div>
      </div>
    </div>
    <div class="footer-column footer-newsletter">
      <h4 data-i18n="footer.follow_us">Newsletter</h4>
      <form id="footer-newsletter-form" aria-label="Subscribe to newsletter">
        <input id="footer-newsletter-email" type="email" placeholder="" data-i18n-placeholder="footer.newsletter_placeholder" aria-label="Email">
        <button type="submit" data-i18n="footer.subscribe">Subscribe</button>
      </form>
      <div id="footer-newsletter-message" style="margin-top:8px;color:#bff7f7;"></div>
    </div>
  </div>

  <div class="container footer-bottom">
    <div>&copy; <span id="footer-year"></span> St. Agnes Health Centre</div>
    <div>Made with ❤️ — St. Agnes Health Centre</div>
  </div>
</footer>

<script>
  document.getElementById('footer-year').textContent = new Date().getFullYear();
</script>
 </body>
 </html>